<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>Python 3 インストール</title>
<link rel="stylesheet" href="style.css">
<link rel="license" href="http://creativecommons.org/licenses/by/4.0/">
</head>
<body>

<nav id="breadcrumbs">
<a href="/~okumura/">ホーム</a> &gt;
<a href="./">Python</a> &gt;
</nav>

<h1>Python 3 インストール</h1>

<p>いろいろな方法があります。</p>

<h3>Python.org からのインストール</h3>

<p><a href="https://www.python.org/download/">Download Python</a> から，ご自分の環境に合った最新のインストーラをダウンロードし，インストールします。Windows の場合は Microsoft Store からもダウンロードできます（「Python」で検索）。</p>

<p>インストールすると，Mac では <code>~/.bash_profile</code> にパスが付け加えられます。</p>

<p><code>python3</code> コマンドのほか，<a href="https://docs.python.org/3/library/idle.html">IDLE</a>（Integrated Development and Learning Environment）という簡単な統合開発環境がインストールされます。</p>

<p>いろいろなパッケージのインストールは pip（<code>pip3</code> コマンド）を使って行います。インストールされるパッケージは <a href="https://pypi.org">PyPI</a> にあるものです。</p>

<pre>
sudo pip3 install ipython numpy scipy matplotlib pandas
</pre>

<p>アップデートの必要なパッケージは</p>

<pre>
pip3 list --outdated
</pre>

<p>で調べられます。実際のアップデートは</p>

<pre>
sudo pip3 install --upgrade パッケージ名
</pre>

<p>です。</p>

<h3>Anaconda によるインストール</h3>

<p><a href="https://www.anaconda.com/distribution/">Anaconda Distribution</a> からご自分の環境に合った最新のインストーラをダウンロードし，インストールします。全部入りなので，たいへん大きいパッケージです。最小限のインストールから始めて少しずつ足していくほうが好みの人は，下にある Miniconda を使うほうがいいでしょう。</p>

<h3>Homebrew によるインストール（Mac）</h3>

<p><code>brew install python</code> で入ります。簡単です。</p>

<p>デフォルトでは <code>/usr/local/bin</code> に <code>python3</code> や <code>pip3</code> などのコマンド（シンボリックリンク）が入ります。また，<code>/usr/local/opt/python/libexec/bin</code> には <code>python</code> など <code>3</code> の付かない名前のシンボリックリンクが入ります。</p>

<p>conda 版と違って macOS フレームワーク版ですので，<code>~/.matplotlib/matplotlibrc</code> は <code>backend: MacOSX</code> で大丈夫です。また，Python.org のインストーラと違って，管理者権限（sudo）なしで <code>pip3 install</code> コマンドが使えます。例えば</p>

<pre>
pip3 install --upgrade pip
pip3 install ipython matplotlib
</pre>

<p>のようにターミナルに打ち込みます。</p>

<p>これで <code>python</code> と打ち込むと macOS 側の Python 2 が，<code>python3</code> と打ち込むと Homebrew 側の Python 3 が動くことになります。<code>ipython</code> は macOS 側にないので <code>3</code> を付ける必要はありません。<code>python</code> と打ち込んで Python 3 が動くようにしたければ，<code>/usr/local/opt/python/libexec/bin</code> のパスを <code>/usr/bin</code> より先に設定します。</p>

<h3>Homebrew による pyenv 経由のインストール（Mac）</h3>

<p><code>brew install pyenv</code> でまず pyenv を入れてから pyenv 経由で各種 Python を入れる方法です。</p>

<p>まず <code>~/.bash_profile</code> に次を書き込みます：</p>

<pre>
PYENV_ROOT="$HOME/.pyenv"
export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init -)"
</pre>

<p>次のコマンドでインストール可能なバージョンを確認します：</p>

<pre>
pyenv install --list
</pre>

<p>例えば Python 3.7.3 をインストールしたいなら</p>

<pre>
pyenv install 3.7.3
</pre>

<p>と打ち込みます。<code>pyenv versions</code> でバージョンを確認します。おそらく <code>system</code> と <code>3.7.3</code> があり，デフォルトでは前者になっているので，新しいほうに替えます：</p>

<pre>
pyenv global 3.7.3
pyenv rehash
</pre>

<p><code>python --version</code> でバージョンを確認します。</p>

<p>要らなくなったバージョンは <code>pyenv uninstall 3.7.2</code> のようにして消せます。</p>

<p>あとは pip で追加インストールします。例：</p>

<pre>
pip install ipython numpy scipy matplotlib pandas
</pre>

<p>インストールされたものを確認します：</p>

<pre>
pip list
</pre>

<p>例えば pip を更新するには次のようにします：</p>

<pre>
pip install --upgrade pip
</pre>

<h3>Miniconda によるインストール</h3>

<p><a href="https://docs.conda.io/en/latest/miniconda.html">Miniconda</a> から最新の Python 3.x 版インストーラをダウンロードし，実行します。</p>

<p>Windows の exe 形式のインストーラは，デフォルトの「Just Me（自分だけ）」設定なら管理者権限不要でインストールできます。スタートメニューの「Anaconda」の中に「Anaconda Powershell Prompt」「Anaconda Prompt」が入るので，好きな方を使います。</p>

<p>Mac にも pkg 形式のインストーラがありますが，私は Mac や CentOS で bash installer を使いました：</p>

<pre>
bash Miniconda3-latest-*-x86_64.sh
</pre>

<p>まずは ENTER を押せと言ってきます。Enter を押すと，ライセンスを表示して，アクセプトするかと聞いてくるので，<code>yes</code> と答えます。次に，インストールの場所は <code>~/miniconda3</code> で良いかと聞いてくるので，それで良ければ Enter を，別の場所（例えば <code>/usr/local/miniconda3</code>）に変えたければその場所を打ち込みます。最後に <code>conda init</code> を実行するかと聞いてくるので，<code>yes</code> と打つと，Mac では <code>~/.bash_profile</code> の最後に，Linux では <code>~/.bashrc</code> の最後に，コードが追加されます。シェルを開き直すか <code>~/.bash何々</code> を再読み込みすると，Mac なら自動でプロンプトの最初に <code>(base)</code> が出て，基本設定の Miniconda 環境が使えるようになります。Linux では安全のため毎回 <code>conda activate</code> と打たないと Miniconda 環境になりません。元の環境（システムの <code>/usr/bin/python</code> を使う）に戻すには <code>conda deactivate</code> します。Mac でも自動アクティベートをオフにしたければ <code>conda config --set auto_activate_base false</code> と打ち込みます（<code>~/.condarc</code> に <code>auto_activate_base: false</code> と書き込まれます）。</p>

<p>パッケージ管理は <code>conda</code> コマンドで行います：</p>

<pre>
conda update --all
conda list
conda install ipython numpy scipy matplotlib pandas scikit-learn
</pre>

<h3>ソースからのインストール</h3>

<p><a href="https://www.python.org/download/">Download Python</a> からソースのtarballをいただいてきて展開し，その中で次のように打ち込みます：</p>

<pre>
./configure --enable-optimizations
make
make install
</pre>

<div class="note">
<p>CentOS 7 上で Python 3.7.3 をインストールしようとしたら <code>make install</code> で次のようなエラーに遭遇：</p>
<pre>
  File "/usr/local/src/Python-3.7.3/Lib/ctypes/__init__.py", line 7, in <module>
    from _ctypes import Union, Structure, Array
ModuleNotFoundError: No module named '_ctypes'
make: *** [install] エラー 1
</pre>
<p>次のようにして <code>libffi-devel</code> をインストールして再度 <code>make install</code> したらうまくいった：</p>
<pre>
# yum install libffi-devel
</pre>
</div>

<p>実行ファイル <code>python3</code>，<code>pip3</code> などが（デフォルトでは）<code>/usr/local/bin</code> に入りますので，そこにパスを通しておきます。Linux では <code>python</code> コマンドで Python 2 が動くことが想定されていることがあるので，<code>python3</code> という名前はそのままにしておくほうがよさそうです。</p>

<h3>Google Collab を使う</h3>

<p>インストールが面倒なら，<a href="https://colab.research.google.com/">Google Collaboratory</a> にアクセスし，「PYTHON 3 の新しいノートブック」をクリックします。Jupyter Notebook が開き，Python プログラムの入力待ちになります。</p>

<pre>
print("Hello, world!")
</pre>

<p>と打ち込んで Shift + Enter してみましょう。</p>

<hr>

<footer>
<p><a href="../" rel="author">奥村 晴彦</a></p>
<p>
<!-- hhmts start -->
Last modified: <time>2019-05-17 11:42:55</time>
<!-- hhmts end -->
</p>
</footer>
</body>
</html>
