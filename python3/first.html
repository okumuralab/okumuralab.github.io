<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>Pythonの初歩</title>
<link rel="stylesheet" href="style.css">
<link rel="license" href="http://creativecommons.org/licenses/by/4.0/">
</head>
<body>

<nav id="breadcrumbs">
<a href="/~okumura/">ホーム</a> &gt;
<a href="./">Python 3</a> &gt;
</nav>

<h1>Pythonの初歩</h1>

<h2>簡単な計算</h2>

<p>Pythonに慣れるため，当分の間は電卓がわりにPythonを使ってみましょう。<a href="run.html">実行</a>を見て，お好きな方法でPythonを起動してください。</p>

<p>まず足し算です。生のPython（<code>python</code> コマンド）ならプロンプト <code>&gt;&gt;&gt;</code> の右側に，IPython（<code>ipython</code> コマンド）ならプロンプト <code>In [1]:</code> の右側に，Jupyter Notebookなら最初の枠内に，<code>123+456</code> と打ち込んでEnterキーを打ちます（Jupyter Notebookなら Shift + Enter です）。次の行に答えが出ます。以下ではIPythonの表示を示します。</p>

<pre>
In [1]: 123+456
Out[1]: 579
</pre>

<p>掛け算は <code>*</code>，割り算は <code>/</code>，累乗は <code>**</code> です（<code>^</code> は累乗ではなくビットごとの排他的論理和です）。計算の順序は，通常の数式と同様，累乗が一番先で，その次が掛け算・割り算，最後が足し算・引き算です。</p>

<pre>
In [2]: 23-4*5
Out[2]: 3

In [3]: (23-4)*5
Out[3]: 95

In [4]: 1/3
Out[4]: 0.3333333333333333

In [5]: 6.02*10**23
Out[5]: 6.019999999999999e+23
</pre>

<p>最後の <code>e+23</code> は「×10<sup>23</sup>」の意味です。実数（浮動小数点数）の表示は上に示すように微妙に誤差が出ますが，これはコンピュータが内部で10進法ではなく2進法を使っているためです。</p>

<p>Python 2では，C言語などと同様に，整数の割り算は整数に切り捨てましたが，Python 3では <code>/</code> は実数（浮動小数点数）の範囲で計算します。Python 3では整数の除算は <code>//</code> を使います。除算の余りは <code>%</code> です。例えば <code>7 // 3</code> は 2 になり，<code>7 % 3</code> は 1 になります。</p>

<p>おもしろいことに，文字列を足し算，掛け算することもできます：</p>

<pre>
In [ ]: "ほげ" + "げほ"
Out[ ]: 'ほげげほ'

In [ ]: "ほげ" * 3
Out[ ]: 'ほげほげほげ'
</pre>

<p>値は <code>x</code> や <code>hoge</code> のような変数に代入することができます。</p>

<pre>
In [6]: x = 1/3

In [7]: x*3
Out[7]: 1.0
</pre>

<p><code>x = 1/3</code> のようにスペースを空けなくても <code>x=1/3</code> のように詰めて書いてもまったく同じです。ここでは，見やすいように，適宜余分なスペースを入れています。</p>

<p>この <code>x</code> のようなものを「変数」と呼びます。変数名は，大文字と小文字を区別します。</p>

<pre>
In [8]: x
Out[8]: 0.3333333333333333

In [9]: X
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
&lt;ipython-input-45-b5fec669aca1&gt; in &lt;module&gt;
----&gt; 1 X

NameError: name 'X' is not defined
</pre>

<p>この <code>NameError</code> は関数名などを間違えたときにも出ます。</p>

<p>対話型環境ならこのように式を打ち込めばそのまま答えが表示されますが，対話型でないプログラム中では <code>print()</code> 関数を使わないと出力されません（以下では入力の行番号は省略します）：</p>

<pre>
In [ ]: print("Hello")
Hello
</pre>

<p><code>print</code> のような関数と同じ名前の変数を作ることもできます（お勧めしません）：</p>

<pre>
In [ ]: print = 3

In [ ]: print
Out[ ]: 3

In [ ]: print("Hello")
...
TypeError: 'int' object is not callable
</pre>

<p>あらら！ 元に戻すには，自分の作った <code>print</code> を削除します：</p>

<pre>
In [ ]: del print

In [ ]: print("Hello")
Hello
</pre>

<p>ほかにどういう関数があるのでしょうか。三角関数は？</p>

<pre>
In [ ]: sin(pi/2)
...
NameError: name 'sin' is not defined
</pre>

<p>駄目ですね。数学関数はいくつかのライブラリで定義されていますが，ここでは <a href="https://www.numpy.org">NumPy</a>（ナムパイ）というライブラリを使うことにします（ほかに <code>math</code> や <code>scipy</code> でも定義されています）。これを読み込むには，次のようにします：</p>

<pre>
In [ ]: import numpy as np
</pre>

<p>これは <code>numpy</code> を <code>np</code> という省略名で読み込む（インポートする）ことを意味します。よく使うライブラリには伝統的な省略名があるので，それに従いましょう。</p>

<pre>
In [ ]: np.pi   # 円周率
Out[ ]: 3.141592653589793

In [ ]: np.e    # 自然対数の底
Out[ ]: 2.718281828459045
</pre>

<p>いげた印 <code>#</code> より右側はコメント（説明のための注釈）です。以下では説明のためにコメントをいろいろ書いていますが，実際に打ち込むときはコメントは必要ありません。</p>

<pre>
In [ ]: np.sin(np.pi / 2)
Out[ ]: 1.0

In [ ]: np.sin(np.pi)
Out[ ]: 1.2246467991473532e-16
</pre>

<p>数値計算の誤差のため sin(π) は 0 にならず，1.22 × 10<sup>-16</sup> という小さな値になりました。</p>

<div class="note">
<p>標準の <code>math</code> ライブラリで定義されているものと違って，NumPy で定義されているものは配列の形で引数を与えることができます。</p>
<pre>
In [ ]: np.sin(0.1)
Out[ ]: 0.09983341664682815

In [ ]: np.sin([0.1,0.2,0.3])
Out[ ]: array([0.09983342, 0.19866933, 0.29552021])

In [ ]: import math

In [ ]: math.sin(0.1)
Out[ ]: 0.09983341664682815

In [ ]: math.sin([0.1,0.2,0.3])
TypeError: must be real number, not list
</pre>
</div>

<p>C言語と同様の書式指定の出力もできます。</p>

<pre>
In [ ]: print("円周率はだいたい %.4f です。" % np.pi)
円周率はだいたい 3.1416 です。
</pre>

<p>関数の括弧を閉じないとどうなるでしょうか。</p>

<pre>
In [ ]: np.sin(np.pi/2
   ...: )
Out[ ]: 1.0
</pre>

<p>このように，IPythonでは続きの入力を促すプロンプト <code>...:</code> が出ます。その右側に，入れ忘れた <code>)</code> を入力してEnterを押します。あるいは，わけがわからなくなったなら Control+C で止まります（Emacs中では Control-C を2回）。</p>

<h2>ヘルプを読む</h2>

<p>IPythonのヘルプを読むには <code>?</code> と打ち込んでEnterを押します。</p>

<p>また，例えば <code>print</code> のヘルプを見るには <code>?print</code> または <code>print?</code> と打ち込みます。</p>

<pre>
In [ ]: ?print
Docstring:
print(value, ..., sep=' ', end='\n', file=sys.stdout, flush=False)

Prints the values to a stream, or to sys.stdout by default.
Optional keyword arguments:
file:  a file-like object (stream); defaults to the current sys.stdout.
sep:   string inserted between values, default a space.
end:   string appended after the last value, default a newline.
flush: whether to forcibly flush the stream.
Type:      builtin_function_or_method
</pre>

<p>これで改行をなくすには <code>end=''</code> とすればよいことが推測できます：</p>

<pre>
In [ ]: print("Hello", end=''); print(" World")
Hello World
</pre>

<h2>終了のしかた</h2>

<p>Pythonは <code>quit()</code> または <code>exit()</code> で終了します。IPythonは <code>quit</code> または <code>exit</code> でもかまいません。</p>

<h2>ひつじがnひき</h2>

<p>眠れない夜は，ひつじを数えてみましょう🐑🐑🐑🐑🐑🐑🐑🐑🐑🐑。</p>

<pre>
for i in range(1,11):
    print("ひつじが", i, "ひき")
</pre>

<p><code>range(1,11)</code> は 1 以上 11 未満の整数を表します。Pythonはインデント（字下げ）でブロック構造を表しますので，必ず上の2行目はスペースかタブでインデントします。</p>

<pre>
ひつじが 1 ひき
ひつじが 2 ひき
ひつじが 3 ひき
ひつじが 4 ひき
ひつじが 5 ひき
ひつじが 6 ひき
ひつじが 7 ひき
ひつじが 8 ひき
ひつじが 9 ひき
ひつじが 10 ひき
</pre>

<p>眠れない夜がまだまだ続くときは，ひつじを数える関数を作りましょう。</p>

<pre>
def hitsuji(n):
    for i in range(1,n+1):
        print("ひつじが", i, "ひき")
</pre>

<p>これで <code>hitsuji(100)</code> と打てば，ひつじが100ひき数えられます。</p>

<h2>Collatzの問題</h2>

<p>1937年にドイツの数学者Collatz（コラッツ）が，「ある数が偶数なら2で割り，奇数なら3倍して1を足す。これを繰り返すとすべての数は1になるだろう」と予想しましたが，だれもそれを証明することができていません。</p>

<p>Pythonのプログラムで調べてみましょう。</p>

<pre>
def collatz(n):
    print(n, end="")
    while (n > 1):
        if (n % 2 == 0):
            n = n // 2
        else:
            n = 3 * n + 1
        print(" →", n, end="")
    print()
</pre>

<p>ここで <code>n % 2</code> はnを2で割った余りです。</p>

<p>例えば <code>collatz(3)</code> と打つと次のように出ます。</p>

<pre>
3 → 10 → 5 → 16 → 8 → 4 → 2 → 1
</pre>

<p>いろいろな数から出発して，Collatzの予想が正しいかどうか確かめてください。Pythonの整数はどんな大きな数でも扱えますので，桁あふれする心配はありません。</p>

<hr>

<p><a href="../" rel="author">奥村 晴彦</a></p>

<p>
<!-- hhmts start -->
Last modified: <time>2019-05-11 20:33:00</time>
<!-- hhmts end -->
</p>
</body>
</html>
