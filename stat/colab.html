<!DOCTYPE html>
<html lang="ja">
<head>
<link rel="canonical" href="https://okumuralab.org/~okumura/stat/colab.html">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Google ColabでRを使う</title>
<link rel="stylesheet" href="style.css">
<link rel="license" href="http://creativecommons.org/licenses/by/4.0/">
</head>
<body>

<nav id="breadcrumbs">
<a href="../">ホーム</a> &gt;
<a href="./">統計・データ解析</a> &gt;
</nav>

<h1>Google ColabでRを使う</h1>

<p>[2023-06-21] Colabの中で簡単にRに切り替えられるようになりました。［ランタイム］→［ランタイムのタイプを変更］でランタイムのタイプをPython 3からRに切り替えて「保存」してください。現在のバージョンはR 4.3.0でした。</p>

<p>最も簡単な方法は <a href="https://colab.research.google.com/notebook#create=true&amp;language=r">https://colab.research.google.com/notebook#create=true&amp;language=r</a> のリンクをたどることです。バックエンドが R になります。</p>

<p>グラフのサイズを指定するには，例えば次のようにオプションを指定します：</p>

<pre><code>options(repr.plot.width=8, repr.plot.height=6)</code></pre>

<p>以降のセッションのすべてのグラフが影響を受けます。それぞれ幅と高さで，単位はインチです。1インチが120ピクセルに相当するサイズのPNG画像になります。Colabの中で見ていると小さいように見えても，ドラッグ＆ドロップで取り出して開くと，けっこうなサイズのものですので，あまり大きくしないようにしましょう。デフォルトは幅・高さとも7インチ（840ピクセル）です。</p>

<p>Python と共存させたい場合には <a href="https://rpy2.github.io">rpy2</a> を使います。あらかじめ</p>

<pre><code>%load_ext rpy2.ipython</code></pre>

<p>としておきます。R を使いたいときには，セルを <code>%%R</code> で始めます：</p>

<pre><code>%%R
curve(sin(x), -pi, pi)
</code></pre>

<p>サインカーブが描かれたでしょうか。</p>

<p>日本語が使えるように設定された Colab 環境（例えば<a href="https://qiita.com/siraasagi/items/d72f60c25b30269d89e4">Google Colabでまたまた日本語表示が豆腐不可避な方に</a>参照）では，フォント名を指定して日本語が使えます：</p>

<pre><code>%%R
curve(sin(x), -pi, pi, main="サインカーブ", family="IPAexGothic")
</code></pre>

<hr>

<p><a href="../" rel="author">奥村 晴彦</a></p>

<p>
<!-- hhmts start -->
Last modified: <time>2023-06-21 10:40:04 JST</time>
<!-- hhmts end -->
</p>
</body>
</html>
